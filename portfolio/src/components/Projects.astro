---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import ethosTrackImage from '../assets/EthosTrack.jpg'

    interface Technology {
        name: string;
        color: string;
    }

    interface Project {
        id: string;
        title: string;
        description: string;
        technologies: Technology[];
        link: string;
        image?: ImageMetadata;
        github?: string;
    }

    interface Props {
        projects?: Project[];
    }

    const defaultProjects: Project[] = [
        {
            id: "1",
            title: "EmilyConnect",
            description: "Mobile App",
            technologies: [
                {name: "Flutter", color: "bg-blue-500"},
                {name: "Dart", color: "bg-green-500"},
                {name: "Firebase", color: "bg-orange-500"},
            ],
            link: "#",
            github: "",
        },
        {
            id: "2",
            title: "EthosTrack",
            description: "Mobile App for habit tracking",
            technologies: [
                {name: "Flutter", color: "bg-blue-500"},
                {name: "Dart", color: "bg-green-500"},
                {name: "Firebase", color: "bg-orange-500"},
            ],
            link: "#",
            image: ethosTrackImage,
            github: "",
        },
        {
            id: "3",
            title: "Ecommerce",
            description: "App to ecommerce",
            technologies: [
                {name: "React", color: "bg-blue-500"},
                {name: "CSS", color: "bg-blue-200"},
                {name: "JavaScript", color: "bg-yellow-500"},
            ],
            link: "#",
            image: ethosTrackImage,
            github: "",
        }
    ];

    const projects = Astro.props.projects ?? defaultProjects;
---

<section id="projects" class="mt-12 px-4 py-12 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-7xl">

      <div class="mb-12 text-center">
        <h2 class="text-3xl font-extrabold text-white sm:text-4xl">Proyectos</h2>
        <p class="mx-auto mt-3 max-w-2xl text-xl text-gray-500 sm:mt-4">Algunos de mis trabajos y estudios de caso.</p>
      </div>

      <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3">
        {projects.map((project) => (
            <article class="overflow-hidden rounded-lg bg-white shadow-md transition-transform duration-300 hover:scale-105">
          <div class="h-48 overflow-hidden bg-gray-200">
            {project.image ? (
              <Image src={project.image} alt={project.title} class="h-full w-full object-cover" />
            ) : (
              <img src="https://placehold.co/600x400/transparent/FFF" alt={project.title} class="h-full w-full object-cover" />
            )}
          </div>
          <div class="p-6">
            <h3 class="text-xl font-semibold text-gray-900">{project.title}</h3>
            <p class="mt-2 text-gray-600">{project.description}</p>

            <div class="mt-4 flex flex-wrap gap-2">
              {project.technologies.map((t) => (
                <span class={`rounded-full px-3 py-1 text-xs font-medium text-white ${t.color}`}>{t.name}</span>
              ))}
            </div>

            <div class="mt-4 flex gap-4">
              {project.link && (
                <a href="#" class="mt-4 inline-flex items-center text-blue-600 hover:text-blue-800">
                    View more
                    <svg xmlns="http://www.w3.org/2000/svg" class="ml-1 h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                </a>
              )}
              {project.github && project.github !== '' && (
                <a href={project.github} target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-gray-700 hover:text-gray-900">
                  GitHub
                </a>
              )}
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>